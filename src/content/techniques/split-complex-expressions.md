---
title: "巨大な式を分割する"
slug: "split-complex-expressions"
tags: ["式の分割", "読みやすさ", "第8章"]
source: "リーダブルコード 第8章"
order: 8
---

複雑で巨大な式は、読みづらくバグの温床になります。  
この章では、**巨大な式や文を整理・分割して読みやすくするテクニック**が紹介されています。

---

## 説明変数

複雑な式の一部に名前をつけて切り出すと、**何を意味するのかが見えるようになります。**  
これが「説明変数（explaining variable）」の基本です。

```js
// ❌ 何をしているかわからない
if (user.age > 64 && user.status !== "retired" && !user.hasBenefit) { ... }

// ✅ 説明変数を使って明確に
const isSenior = user.age > 64;
const isActive = user.status !== "retired";
const lacksBenefit = !user.hasBenefit;

if (isSenior && isActive && lacksBenefit) { ... }
```

---

## ようやく変数

「式全体が何を意味しているか」を明示するために、**最終結果を変数に代入するテクニック**です。  
読者に「これは何のための式か？」を一発で伝えます。

```js
const shouldRequestSupport = isSenior && isActive && lacksBenefit;
```

---

## ド・モルガンの法則

否定を分配して論理式を変形する法則です。  
**複雑な否定式を読みやすく書き換える手段**として使えます。

### ド・モルガンの覚え方

- `!(A && B)` → `!A || !B`
- `!(A || B)` → `!A && !B`

逆方向も同様に：
- `!A || !B` → `!(A && B)`
- `!A && !B` → `!(A || B)`

```js
// ❌ 読みにくい否定の組み合わせ
if (!(isAdmin || isManager)) { ... }

// ✅ ド・モルガンでわかりやすく
if (!isAdmin && !isManager) { ... }
```

---

## 短絡評価の悪用に注意

JavaScriptなどの言語では、短絡評価（`&&` や `||`）を使って条件と処理を1行にまとめられますが、  
**「頭いい感じ」で書いても読み手は混乱するだけ**です。

```js
// ❌ 一見かっこいいけど読みにくい
isValid && doSomething();

// ✅ 明確な分岐
if (isValid) {
  doSomething();
}
```

---

## 複雑なロジックと格闘する

ときには創造性も必要です。  
「自然に書けない」式と出会ったら、**反対側から問題を解く・条件を逆転して考える**と突破口が見えることがあります。

```js
// 条件を逆にしたらシンプルになることもある
if (!isGuest) {
  showDashboard();
}
```

---

## 巨大な文を分割する

式だけでなく、**1つの文が長くなりすぎると、それ自体が理解を妨げます。**  
適切な変数、関数分割、処理の順序を工夫し、読みやすく整理しましょう。

---

## まとめ

- 巨大な式は、説明変数やようやく変数で分割して意味を明示する
- ド・モルガンの法則を活用して否定のロジックを整理する
- 短絡評価を乱用せず、読み手を意識した書き方を心がける
- ロジックに詰まったら、逆から考える発想も有効
- 巨大な「文」も読みやすく分けて構造を整える
