---
title: "制御構造を読みやすくする"
slug: "control-structure"
tags: ["条件分岐", "ネスト", "第7章"]
source: "リーダブルコード 第7章"
order: 7
---

制御構造は、コードの流れを決定づける重要な要素です。  
この章では、**条件式や分岐、ネストを「読みやすく整理する技法」**について学びます。

---

## 条件式の引数の並び順

条件式では、**左側に調査対象（変化するもの）**を、  
**右側に比較対象（安定しているもの）**を置くと自然な読み方になります。

```js
// 調査対象が左、比較対象が右
if (userInput === DEFAULT_VALUE) { ... }
```

このように書くことで、読み手は「何を比較しているのか」がすっと頭に入ります。

---

## if/elseブロックの並び順

### 条件は否定よりも肯定を使う

```js
// ❌ 否定を使うと読みにくい
if (!isReady) { ... }

// ✅ 肯定の条件を使う
if (isReady) { ... }
```

### 単純な条件を先に書く

```js
if (user == null) {
  return;
}

// 複雑な処理はあとから読む
```

### 関心を引く・目立つ条件を先に書く

```js
if (hasCriticalError) {
  shutdown();
} else if (hasWarning) {
  logWarning();
}
```

### 否定系でも注意を引くものは先に処理する

読み手にインパクトがある処理は、**否定系でも先に扱う**と意図が伝わりやすくなります。

---

## 三項演算子は控えめに

三項演算子（`condition ? a : b`）は短くて便利ですが、**複雑になると読みにくくなります**。  
基本的には `if/else` を使い、簡潔なときだけ三項演算子を使いましょう。

```js
// ❌ ネストされた三項演算子は避ける
const level = score > 80 ? "high" : score > 50 ? "medium" : "low";

// ✅ 読みやすい分岐にする
if (score > 80) {
  level = "high";
} else if (score > 50) {
  level = "medium";
} else {
  level = "low";
}
```

---

## do/while は避ける

`do/while` はループの意図が見えづらく、誤解を招くことがあるため、**原則として避ける方が無難**です。  
代わりに通常の `while` や `for` を使って、**明示的な流れを表現**しましょう。

---

## 関数から早く返す

処理を早めに打ち切ることで、**コードのネストが減り、読みやすくなります。**  
この手法は「ガード節（Guard Clause）」と呼ばれます。

```js
// ✅ ガード節で早期リターン
if (!isValid(user)) {
  return;
}

process(user);
```

---

## ネストを浅くする

ネストが深くなると、**読み手の理解コストが急増します**。  
- ガード節で早く返す
- 条件を関数に切り出す
- 無駄な else を避ける

などのテクニックで、**コードをフラットに保ちましょう。**

---

## まとめ

- 条件式は「変わるものを左」「変わらないものを右」に
- 条件は肯定形で書き、重要なもの・単純なものを先に扱う
- 三項演算子の乱用は避け、`if/else` を基本に
- `do/while` は避け、読みやすいループを
- 関数から早く返し、ネストを浅く保つ
