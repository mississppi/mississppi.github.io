---
title: "OAuth 2.0 超入門"
slug: "oauth-basics"
tags: ["OAuth", "認可", "認証", "セキュリティ"]
---

# 🔐 OAuth 2.0 超入門

OAuth（オーオース）は「**第三者があなたの代わりにサービスを使うための仕組み**」です。  
例: 「Twitterでログイン」「Googleカレンダーに予定を書き込む」など。

---

## 🤝 OAuthって何のためにあるの？

- 自分の**IDとパスワードを直接渡さずに**、他のサービスにアクセスさせるための仕組み。
- アクセス権を**トークンとして一時的に貸し出す**ことで、安全に連携できる。

---

## 🔁 OAuthの流れ（Authorization Code Flow）

### 登場人物

| 誰？ | 役割 |
|------|------|
| リソースオーナー | あなた（ユーザー） |
| クライアント | 連携アプリ（例: ToDoアプリ） |
| 認可サーバー | アカウント管理（例: Google） |
| リソースサーバー | データを提供する本体（例: Google Calendar API） |

### 処理の流れ

1. **クライアントが認可サーバーにリダイレクト**（ログイン画面へ）
2. ユーザーが**ログインと許可**をする
3. 認可サーバーが**認可コード**をクライアントに渡す
4. クライアントがそのコードを使って**アクセストークン**を取得
5. 以後、**アクセストークン**を使ってリソースサーバーにアクセス

---

## 🧾 アクセストークンとリフレッシュトークン

- アクセストークン: APIにアクセスするための「使い捨てキー」（期限付き）
- リフレッシュトークン: アクセストークンが切れたときに再発行するためのトークン

---

## ✅ OAuthのメリット

- パスワードを共有しなくていい
- トークンには**スコープ（権限範囲）**を設定できる
- 万が一漏れても**トークンだけを無効化**できる

---

## 🛑 注意点

- **認証（誰？）**と**認可（何していい？）**は別物
  - OAuthは「認可」がメイン
  - ログイン用途には**OpenID Connect（OIDC）**を使うのが一般的（OAuthをベースにした認証の拡張）

---

## 📚 まとめ

OAuthは、**ユーザーが他のサービスに一部のアクセス権を安全に与える仕組み**です。

- 実際に自作アプリにログイン機能をつけるときは「OpenID Connect（OIDC）」の実装を検討すると良いです。

